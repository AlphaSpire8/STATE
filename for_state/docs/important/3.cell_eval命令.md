# cell-eval命令

1. cell-eval prep 命令

```bash
usage: cell-eval prep [-h] -i INPUT -g GENES [-o OUTPUT] [-p PERT_COL] [-c CELLTYPE_COL] [-n NTC_NAME] [-P OUTPUT_PERT_COL] [-C OUTPUT_CELLTYPE_COL] [-e ENCODING] [--allow-discrete] [--expected-gene-dim EXPECTED_GENE_DIM] [--max-cell-dim MAX_CELL_DIM] [--version]

options:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        Path to h5ad to read
  -g GENES, --genes GENES
                        CSV file containing expected gene names and order
  -o OUTPUT, --output OUTPUT
                        Path to vcc to write [default: <input>.prep.vcc]
  -p PERT_COL, --pert-col PERT_COL
                        Name of the column designated perturbations [default: target_gene]
  -c CELLTYPE_COL, --celltype-col CELLTYPE_COL
                        Name of the column designated celltype (optional)
  -n NTC_NAME, --ntc-name NTC_NAME
                        Name of the column designated negative control (optional) [default: non-targeting]
  -P OUTPUT_PERT_COL, --output-pert-col OUTPUT_PERT_COL
                        Name of the column designated perturbations in the output [default: target_gene]
  -C OUTPUT_CELLTYPE_COL, --output-celltype-col OUTPUT_CELLTYPE_COL
                        Name of the column designated celltype in the output [default: celltype]
  -e ENCODING, --encoding ENCODING
                        Bit size to encode ([64, 32]) [default: 32]
  --allow-discrete      Bypass log normalization in case we incorrectly guess the data is discrete
  --expected-gene-dim EXPECTED_GENE_DIM
                        Expected gene dimension (18080) [default: 18080]. Set to -1 to disable.
  --max-cell-dim MAX_CELL_DIM
                        Maximum cell dimension (200000) [default: 200000]. Set to -1 to disable.
  --version             show program's version number and exit
```

2. cell-eval run 命令

```bash
usage: cell-eval run [-h] -ap ADATA_PRED -ar ADATA_REAL [-dp DE_PRED] [-dr DE_REAL] [--control-pert CONTROL_PERT] [--pert-col PERT_COL] [--celltype-col CELLTYPE_COL] [--embed-key EMBED_KEY] [-o OUTDIR] [--num-threads NUM_THREADS] [--batch-size BATCH_SIZE]
                     [--de-method DE_METHOD] [--allow-discrete] [--profile {full,minimal,vcc,de,anndata,pds}] [--skip-metrics SKIP_METRICS] [--version]

options:
  -h, --help            show this help message and exit
  -ap ADATA_PRED, --adata-pred ADATA_PRED
                        Path to the predicted adata object to evaluate
  -ar ADATA_REAL, --adata-real ADATA_REAL
                        Path to the real adata object to evaluate against
  -dp DE_PRED, --de-pred DE_PRED
                        Path to the predicted DE results (computed with pdex from adata-pred if not provided and saved to ./cell-eval-outdir/pred_de.csv)
  -dr DE_REAL, --de-real DE_REAL
                        Path to the real DE results (computed with pdex from adata-real if not provided and saved to ./cell-eval-outdir/real_de.csv)
  --control-pert CONTROL_PERT
                        Name of the control perturbation [default: non-targeting]
  --pert-col PERT_COL   Name of the column designated perturbations [default: target_gene]
  --celltype-col CELLTYPE_COL
                        Name of the column designated celltype to split results by (optional)
  --embed-key EMBED_KEY
                        Key for embedded data (.obsm) in the AnnData object used in some metrics (evaluated over .X otherwise)
  -o OUTDIR, --outdir OUTDIR
                        Output directory to write to [default: ./cell-eval-outdir]
  --num-threads NUM_THREADS
                        Number of threads to use for parallel processing [default: 1]
  --batch-size BATCH_SIZE
                        Batch size for parallel processing [default: 100]
  --de-method DE_METHOD
                        Method to use for differential expression analysis [default: wilcoxon]
  --allow-discrete      Allow discrete data to be evaluated (usually expected to be norm-logged inputs)
  --profile {full,minimal,vcc,de,anndata,pds}
                        Profile of metrics to compute [default: full]
  --skip-metrics SKIP_METRICS
                        Metrics to skip (comma-separated for multiple) (see docs for more details)
  --version             show program's version number and exit
```

3. cell-eval baseline 命令

```bash
usage: cell-eval baseline [-h] -a ADATA [-c COUNTS] [-o OUTPUT_PATH] [-O OUTPUT_DE_PATH] [--control-pert CONTROL_PERT] [--pert-col PERT_COL] [--counts-col COUNTS_COL] [-t NUM_THREADS] [--allow-discrete] [--skip-de] [--version]

options:
  -h, --help            show this help message and exit
  -a ADATA, --adata ADATA
                        Path to the anndata
  -c COUNTS, --counts COUNTS
                        Path to the perturbation cell counts
  -o OUTPUT_PATH, --output-path OUTPUT_PATH
                        Path to save the baseline anndata [default: ./baseline.h5ad]
  -O OUTPUT_DE_PATH, --output-de-path OUTPUT_DE_PATH
                        Path to save the baseline differential expression table [default: ./baseline_de.csv]
  --control-pert CONTROL_PERT
                        Name of the control perturbation [default: non-targeting]
  --pert-col PERT_COL   Name of the column designated perturbations [default: target_gene]
  --counts-col COUNTS_COL
                        Name of the column designated counts in input csv (if provided) [default: n_cells]
  -t NUM_THREADS, --num-threads NUM_THREADS
                        Number of threads to use [default: 1]
  --allow-discrete      Bypass log normalization in case we incorrectly guess the data is discrete
  --skip-de             Whether to skip differential expression analysis
  --version             show program's version number and exit
```

4. cell-eval score 命令

```bash
usage: cell-eval score [-h] -i USER_INPUT -I BASE_INPUT [-o OUTPUT] [--version]

options:
  -h, --help            show this help message and exit
  -i USER_INPUT, --user-input USER_INPUT
                        Path to aggregated results for user model
  -I BASE_INPUT, --base-input BASE_INPUT
                        Path to aggregated results for base model
  -o OUTPUT, --output OUTPUT
                        Path to csv to write [default: ./baseline_diff.csv]
  --version             show program's version number and exit
```

